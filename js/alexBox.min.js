var pictures=document.querySelectorAll(".alex-box"),count=-1,i=-1,currentGallery="",currentState="block",galleria,dirSwipe;function preloader(){preloadIMG=Array.from(pictures).filter(a=>{if(!a.getAttribute("type"))return a}),preloadIMG&&(arrIMG=preloadIMG.map(a=>{var b=new Image;return b.src=a.getAttribute("href"),b}))}function addLoadEvent(a){var b=window.onload;window.onload="function"==typeof window.onload?function(){b&&b(),a()}:a}addLoadEvent(preloader),window.addEventListener("keydown",notArrows);function notArrows(a){a.preventDefault()}pictures.forEach(a=>{a.addEventListener("click",function(){open(this)}),a.addEventListener("touch",function(){open(this)})});function swipeAddClasses(a){swipedetect(a,function(b){"left"==b?(dirSwipe="right",a.classList.remove("enterEffect"),a.classList.add("swipeLeft")):"right"==b&&(dirSwipe="left",a.classList.remove("enterEffect"),a.classList.add("swipeRight")),setTimeout(keypressed,200),"up"==b?(a.classList.remove("enterEffect"),a.classList.add("swipeUp"),setTimeout(close,350)):"down"==b?(a.classList.remove("enterEffect"),a.classList.add("swipeDown"),setTimeout(close,350)):"none"==b&&toggleArrows()})}function createModal(a,b){if("video"==b){var c=document.createElement("source"),d=document.createAttribute("src");d.value=a;var f=document.createAttribute("type");f.value="video/mp4",c.setAttributeNode(d),c.setAttributeNode(f);var g=document.createElement("video"),h=document.createAttribute("controls");g.setAttributeNode(h),g.classList.add("video","enterEffect"),g.addEventListener("click",clickedPic),g.addEventListener("click",toggleArrows),g.appendChild(c),swipeAddClasses(g)}else{var k=document.createElement("img");k.src=a,k.classList.add("foto","enterEffect"),k.addEventListener("click",clickedPic),k.addEventListener("click",toggleArrows),swipeAddClasses(k)}var l=document.createElement("div");l.classList.add("x"),l.style.display=currentState,l.addEventListener("click",function(){close()});var m=document.createElement("div");m.classList.add("lBtn"),m.style.display=currentState,m.addEventListener("click",function(){arrow(this)});var o=document.createElement("div");o.classList.add("rBtn"),o.style.display=currentState,o.addEventListener("click",function(){arrow(this)});var p=document.createElement("div");p.classList.add("counter"),p.innerHTML=conta(currentGallery),p.style.display=currentState;var q=document.createElement("div");q.classList.add("modal-lightbox"),q.addEventListener("click",clicked),document.addEventListener("keydown",keypressed),q.appendChild(l),q.appendChild(m),q.appendChild(o),q.appendChild(p),"video"==b?q.appendChild(g):q.appendChild(k),body=document.querySelector("body"),body.appendChild(q),body.style.overflow="hidden"}function open(a){event&&event.preventDefault(),a.classList.add("opened");var b=a.getAttribute("type");currentGallery=a.getAttribute("gallery-alex-box"),b?createModal(a.getAttribute("href"),b):createModal(a.getAttribute("href")),pictures.forEach(function(c,d){c===a&&(i=d)})}function conta(a){var b=0,c;pictures.forEach(f=>{f.getAttribute("gallery-alex-box")==a&&b++,f.classList.contains("opened")&&(c=b)});var d=c+"/"+b;return d}function clicked(){close()}function toggleArrows(){var a=document.querySelectorAll(".lBtn, .rBtn, .x, .counter");"block"==currentState?(a.forEach(b=>{b.style.display="none"}),currentState="none"):(a.forEach(b=>{b.style.display="block"}),currentState="block")}function clickedPic(){event.stopPropagation()}function close(){pictures.forEach(a=>{if(a.classList.contains("opened")){a.classList.remove("opened");var b=document.querySelector(".modal-lightbox");b.parentNode.removeChild(b),document.removeEventListener("keydown",keypressed)}}),dirSwipe="",body.style.overflow="auto"}function keypressed(a){if(a)var b=a.charCode||a.keyCode;37==b||40==b||"left"==dirSwipe?(a&&a.preventDefault(),close(),open(pictures[previous(i,currentGallery)])):39==b||38==b||"right"==dirSwipe?(a&&a.preventDefault(),close(),open(pictures[next(i,currentGallery)])):27==b&&(a&&a.preventDefault(),close())}function previous(a,b){var c=0>=a?pictures.length-1:a-1;return pictures[c].getAttribute("gallery-alex-box")==b?c:previous(c,b)}function next(a,b){var c=a>=pictures.length-1?0:a+1;return pictures[c].getAttribute("gallery-alex-box")==b?c:next(c,b)}function arrow(a){event.stopPropagation(),close(),a.classList.contains("lBtn")?open(pictures[previous(i,currentGallery)]):open(pictures[next(i,currentGallery)])}function swipedetect(a,b){var d,f,g,h,k,p,q,c=a,l=5,m=50,r=b||function(){};c.addEventListener("touchstart",function(s){var t=s.changedTouches[0];d="none",dist=0,f=t.pageX,g=t.pageY,q=new Date().getTime(),s.preventDefault()},!1),c.addEventListener("touchmove",function(s){s.preventDefault()},!1),c.addEventListener("touchend",function(s){var t=s.changedTouches[0];h=t.pageX-f,k=t.pageY-g,p=new Date().getTime()-q,p<=600&&(Math.abs(h)>=l&&Math.abs(k)<=m?d=0>h?"left":"right":Math.abs(k)>=l&&Math.abs(h)<=m&&(d=0>k?"up":"down")),r(d),s.preventDefault()},!1)}