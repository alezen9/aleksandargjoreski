var galleria,dirSwipe,pictures=document.querySelectorAll(".alex-box"),count=-1,i=-1,currentGallery="",currentState="block";function preloader(){preloadIMG=Array.from(pictures).filter(e=>{if(!e.getAttribute("type"))return e}),preloadIMG&&(arrIMG=preloadIMG.map(e=>{var t=new Image;return t.src=e.getAttribute("href"),t}))}function addLoadEvent(e){var t=window.onload;"function"!=typeof window.onload?window.onload=e:window.onload=function(){t&&t(),e()}}function notArrows(e){e.preventDefault()}function swipeAddClasses(e){swipedetect(e,function(t){"left"==t?(dirSwipe="right",e.classList.remove("enterEffect"),e.classList.add("swipeLeft")):"right"==t&&(dirSwipe="left",e.classList.remove("enterEffect"),e.classList.add("swipeRight")),setTimeout(keypressed,200),"up"==t?(e.classList.remove("enterEffect"),e.classList.add("swipeUp"),setTimeout(close,350)):"down"==t?(e.classList.remove("enterEffect"),e.classList.add("swipeDown"),setTimeout(close,350)):"none"==t&&toggleArrows()})}function createModal(e,t){if("video"==t){var r=document.createElement("source"),n=document.createAttribute("src");n.value=e;var i=document.createAttribute("type");i.value="video/mp4",r.setAttributeNode(n),r.setAttributeNode(i);var a=document.createElement("video"),o=document.createAttribute("controls");a.setAttributeNode(o),a.classList.add("video","enterEffect"),a.addEventListener("click",clickedPic),a.addEventListener("click",toggleArrows),a.appendChild(r),swipeAddClasses(a)}else{var c=document.createElement("img");c.src=e,c.classList.add("foto","enterEffect"),c.addEventListener("click",clickedPic),c.addEventListener("click",toggleArrows),swipeAddClasses(c)}var s=document.createElement("div");s.classList.add("x"),s.style.display=currentState,s.addEventListener("click",function(){close()});var d=document.createElement("div");d.classList.add("lBtn"),d.innerHTML='<svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 218.03 416.03"><path d="M2.94 17.08l67.07 67.07 106.45 106.46 24.48 24.48c9.11 9.11 23.26-5 14.14-14.14l-67.07-67.08L41.56 27.41 17.08 2.94c-9.11-9.11-23.26 5-14.14 14.14z" fill="#fff"/><path d="M17.08 413.08l67.07-67.07 106.46-106.45 24.48-24.48c9.11-9.11-5-23.26-14.14-14.14l-67.08 67.07L27.41 374.46 2.93 398.94c-9.11 9.11 5 23.26 14.14 14.14z" fill="#fff"/></svg>',d.style.display=currentState,d.addEventListener("click",function(){arrow(this)});var l=document.createElement("div");l.classList.add("rBtn"),l.innerHTML='<svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 218.03 416.03"><path d="M2.94 17.08l67.07 67.07 106.45 106.46 24.48 24.48c9.11 9.11 23.26-5 14.14-14.14l-67.07-67.08L41.56 27.41 17.08 2.94c-9.11-9.11-23.26 5-14.14 14.14z" fill="#fff"/><path d="M17.08 413.08l67.07-67.07 106.46-106.45 24.48-24.48c9.11-9.11-5-23.26-14.14-14.14l-67.08 67.07L27.41 374.46 2.93 398.94c-9.11 9.11 5 23.26 14.14 14.14z" fill="#fff"/></svg>',l.style.display=currentState,l.addEventListener("click",function(){arrow(this)});var u=document.createElement("div");u.classList.add("counter"),u.innerHTML=conta(currentGallery),u.style.display=currentState;var p=document.createElement("div");p.classList.add("modal-lightbox"),p.addEventListener("click",clicked),document.addEventListener("keydown",keypressed),p.appendChild(s),p.appendChild(d),p.appendChild(l),p.appendChild(u),"video"==t?p.appendChild(a):p.appendChild(c),body=document.querySelector("body"),body.appendChild(p),body.style.overflow="hidden"}function open(e){event&&event.preventDefault(),e.classList.add("opened");var t=e.getAttribute("type");currentGallery=e.getAttribute("gallery-alex-box"),t?createModal(e.getAttribute("href"),t):createModal(e.getAttribute("href")),pictures.forEach(function(t,r){t===e&&(i=r)})}function conta(e){var t,r=0;return pictures.forEach(n=>{n.getAttribute("gallery-alex-box")==e&&r++,n.classList.contains("opened")&&(t=r)}),t+"/"+r}function clicked(){close()}function toggleArrows(){var e=document.querySelectorAll(".lBtn, .rBtn, .x, .counter");"block"==currentState?(e.forEach(e=>{e.style.display="none"}),currentState="none"):(e.forEach(e=>{e.style.display="block"}),currentState="block")}function clickedPic(){event.stopPropagation()}function close(){pictures.forEach(e=>{if(e.classList.contains("opened")){e.classList.remove("opened");var t=document.querySelector(".modal-lightbox");t.parentNode.removeChild(t),document.removeEventListener("keydown",keypressed)}}),dirSwipe="",body.style.overflow="auto"}function keypressed(e){if(e)var t=e.charCode||e.keyCode;37==t||40==t||"left"==dirSwipe?(e&&e.preventDefault(),close(),open(pictures[previous(i,currentGallery)])):39==t||38==t||"right"==dirSwipe?(e&&e.preventDefault(),close(),open(pictures[next(i,currentGallery)])):27==t&&(e&&e.preventDefault(),close())}function previous(e,t){var r=e<=0?pictures.length-1:e-1;return pictures[r].getAttribute("gallery-alex-box")==t?r:previous(r,t)}function next(e,t){var r=e>=pictures.length-1?0:e+1;return pictures[r].getAttribute("gallery-alex-box")==t?r:next(r,t)}function arrow(e){event.stopPropagation(),close(),e.classList.contains("lBtn")?open(pictures[previous(i,currentGallery)]):open(pictures[next(i,currentGallery)])}function swipedetect(e,t){var r,n,i,a,o,c,s=e,d=t||function(e){};s.addEventListener("touchstart",function(e){var t=e.changedTouches[0];r="none",dist=0,n=t.pageX,i=t.pageY,c=(new Date).getTime(),e.preventDefault()},!1),s.addEventListener("touchmove",function(e){e.preventDefault()},!1),s.addEventListener("touchend",function(e){var t=e.changedTouches[0];a=t.pageX-n,o=t.pageY-i,(new Date).getTime()-c<=600&&(Math.abs(a)>=5&&Math.abs(o)<=50?r=a<0?"left":"right":Math.abs(o)>=5&&Math.abs(a)<=50&&(r=o<0?"up":"down")),d(r),e.preventDefault()},!1)}addLoadEvent(preloader),window.addEventListener("keydown",notArrows),pictures.forEach(e=>{e.addEventListener("click",function(){open(this)}),e.addEventListener("touch",function(){open(this)})});