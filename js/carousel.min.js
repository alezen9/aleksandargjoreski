var carousel=document.querySelector('.carousel'),cells=carousel.querySelectorAll('.carousel__cell'),cellCount=cells.length,selectedIndex=0,cellWidth=carousel.offsetWidth,cellHeight=carousel.offsetHeight,isHorizontal=!0,rotateFn='rotateY',radius=Math.round(cellWidth/2/Math.tan(Math.PI/cellCount)),theta=360/cellCount;cells.forEach(cell => {cell.addEventListener('touchstart',(e)=>{e.preventDefault();});});swipedetect(carousel,function(a){'left'==a?(selectedIndex++,rotateCarousel()):'right'==a&&(selectedIndex--,rotateCarousel())});function rotateCarousel(){var a=-1*(theta*selectedIndex);carousel.style.transform='translateZ('+-radius+'px) '+rotateFn+'('+a+'deg)',cells.forEach((b,c)=>{if(0<=selectedIndex)b.style.opacity=c==selectedIndex%cellCount?1:0.1;else{var d=cellCount-Math.abs(selectedIndex%cellCount)==cellCount?0:cellCount-Math.abs(selectedIndex%cellCount);b.style.opacity=c==d?1:0.1}})}var prevButton=document.querySelector('.previous-button');prevButton.addEventListener('click',function(){selectedIndex--,rotateCarousel()});var nextButton=document.querySelector('.next-button');nextButton.addEventListener('click',function(){selectedIndex++,rotateCarousel()});function changeCarousel(){for(var b,a=0;a<cells.length;a++)if(b=cells[a],a<cellCount){b.style.opacity=1;var c=theta*a;b.style.transform=rotateFn+'('+c+'deg) translateZ('+radius+'px)'}else b.style.opacity=0,b.style.transform='none';rotateCarousel()}function onOrientationChange(){rotateFn='rotateY',changeCarousel()}onOrientationChange();function swipedetect(a,b){var d,f,g,h,j,n,o,c=a,p=b||function(){};c.addEventListener('touchstart',function(q){var r=q.changedTouches[0];d='none',dist=0,f=r.pageX,g=r.pageY,o=new Date().getTime()},!1),c.addEventListener('touchmove',function(){},!1),c.addEventListener('touchend',function(q){var r=q.changedTouches[0];h=r.pageX-f,j=r.pageY-g,n=new Date().getTime()-o,n<=600&&Math.abs(h)>=5&&Math.abs(j)<=50&&(d=0>h?'left':'right',q.preventDefault()),p(d)},!1)}